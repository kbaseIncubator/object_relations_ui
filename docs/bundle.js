!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=n(12);function i(e,t,n){var i,a,s,l={};if(void 0!==n?(l=t,o.array(n)?i=n:o.primitive(n)?a=n:n&&n.sel&&(i=[n])):void 0!==t&&(o.array(t)?i=t:o.primitive(t)?a=t:t&&t.sel?i=[t]:l=t),void 0!==i)for(s=0;s<i.length;++s)o.primitive(i[s])&&(i[s]=r.vnode(void 0,void 0,void 0,i[s],void 0));return"s"!==e[0]||"v"!==e[1]||"g"!==e[2]||3!==e.length&&"."!==e[3]&&"#"!==e[3]||function e(t,n,r){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==r&&void 0!==n)for(var o=0;o<n.length;++o){var i=n[o].data;void 0!==i&&e(i,n[o].children,n[o].sel)}}(l,i,e),r.vnode(e,l,i,a,void 0)}t.h=i,t.default=i},function(e,t,n){const r=n(26).init([n(14).default,n(15).default,n(16).default,n(17).default,n(18).default,n(19).default]),o=n(0).default;e.exports=function(e){const t=e.view;return e._viewArgs=[],e._vnode=r(document.createElement("div"),o("div")),e._render=function(){const n=r(e._vnode,t.apply(e,e._viewArgs));for(let t in n)e._vnode[t]=n[t];return e._vnode},e.view=function(){return e._viewArgs=arguments,e._render()},e}},function(e,t){function n(e,t){const n=window._env.authToken,r=window._env.relEngURL.replace(/\/$/,"")+"/api/query_results/"+function(e){const t=[];for(let n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return"?"+t.join("&")}(t),o={};return n&&(o.Authorization=n),window.fetch(r,{method:"POST",headers:o,mode:"cors",body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{if(e&&e.results)return e;if(e&&e.error)throw new Error(e.error)})}e.exports={fetchLinkedObjs:function(e,t){return n({obj_key:e,owners:!1,types:[t.type],show_private:!0,show_public:!0,offset:t.offset,results_limit:t.limit},{view:"wsprov_fetch_linked_objects"})},fetchHomologs:function(e,t){const n=window._env.sketchURL,r={method:"get_homologs",params:{ws_ref:e,n_max_results:500}},o={};window._env.authToken&&(o.Authorization=window._env.authToken);return window.fetch(n,{method:"POST",headers:o,mode:"cors",body:JSON.stringify(r)}).then(e=>e.json()).then(function(e){if(e&&e.result&&e.result.distances&&e.result.distances.length)return e.result.distances})},fetchTypeCounts:function(e){return n({obj_key:e,owners:!1,type:!1,show_private:!0,show_public:!0},{view:"wsprov_count_linked_object_types"})},fetchKnowledgeScores:function(e){return n({obj_ids:e,prop:"knowledge_score"},{view:"wsprov_fetch_obj_field",batch_size:500})},fetchReferences:function(e){return n({obj_key:e,result_limit:10,offset:0},{view:"wsprov_fetch_references"})}}},function(e,t){e.exports=function(e,t){if(e)return"function"==typeof t?t():t;return""}},function(e,t){e.exports=(e=>e.replace(/\//g,":"))},function(e,t){e.exports=function(e){const t=e.match(/^.+\.(.+)-.+$/);return t?t[1]:e}},function(e,t){e.exports=function(e,t){return e>t?1:e<t?-1:0}},function(e,t){e.exports=function(e){try{const t=new Date(Date.parse(e)),n=t.toLocaleDateString("en-US");return"Invalid Date"===n?e:n}catch(t){return e}}},function(e,t,n){const r=n(24);e.exports=function(e){const t=window._env.kbaseRoot,n=t+"/#dataview/",o=t+"/#spec/type/",i={};e.ws_type&&(i.type=o+e.ws_type);e.upa?i.obj=n+e.upa:e._key&&(i.obj=n+r(e._key));e.workspace_id&&(i.narrative=`https://narrative.kbase.us/narrative/ws.${e.workspace_id}.obj.1`);e.owner&&(i.owner=t+"/#people/"+e.owner);return i}},function(e,t,n){const r=n(0).default;e.exports=function(e,t,n){let o;return o=n?r("a.inline-block.right.text-ellipsis.mw-36rem",{props:{href:n,target:"_blank"}},t):r("span.inline-block.right.text-ellipsis.mw-36rem",t),r("div.px1",[r("p.m0.py1.border-bottom.light-border",[r("span.bold.color-devil",e),o])])}},function(e,t,n){const r=n(0).default,o=n(13),i=n(3),{fetchTypeCounts:a}=n(2),s=n(4),l=n(5),d=n(6),u=n(1),c=n(20),{HomologTable:f}=n(22),{LinkedDataTable:p}=n(25);function h(){const e=this;window._page=e;const t=e=>r("div.container.px2.max-width-3",e);return e.pendingInput?t([e.upaForm.view(),r("p.muted","Waiting for input...")]):t([e.upaForm.view(),i(e.error,()=>r("p.error",e.error)),r("div",[m(e),e.homologTable.view()])])}function m(e){return e.loading?r("p.muted","Searching for linked data..."):e.typeCounts&&e.typeCounts.length?r("div",[r("h2.mt0","Linked Data"),r("div",e.typeCounts.map(t=>{const{count:n,expanded:a}=t,s=o.colors[t.typeName],l=t.typeName.split("").filter(e=>e===e.toUpperCase()).slice(0,3).join("");return r("div.relative.result-row.my2",[r("div.hover-parent",{on:{click:()=>{t.expanded=!t.expanded,t.expanded&&!t.subdata?e.fetchTypeList(t):e._render()}}},[v(l,a,s),r("h4.inline-block.m0",{style:{paddingLeft:"38px"}},[t.typeName," · ",r("span.muted",[n," total"])])]),i(t.expanded,()=>(function(e,t){const n=o.colors[t.typeName];return r("div.mb2.pt1.clearfix",{style:{paddingLeft:"38px"}},[r("span.circle-line",{style:{background:n}}),t.linkedDataTable.view()])})(0,t))])}))]):r("p.muted","No linked data results.")}function v(e,t,n){return r("span.mr1.circle.inline-block",{class:{"hover-caret-up":t,"hover-caret-down":!t},style:{background:n}},[r("span.hover-hide",{style:{fontSize:"1rem",lineHeight:"1.75rem"}},[e]),r("span.hover-arrow.hover-inline-block",t?"−":"+")])}window.addEventListener("message",function(e){let t;try{t=JSON.parse(e.data)}catch(e){return void console.error(e)}if(!(t.method in window._messageHandlers))return console.error("Unknown method: "+t.method),void console.log("Docs: https://github.com/kbaseincubator/object_relations_ui");window._messageHandlers[t.method](t.params)},!1),window._env={kbaseEndpoint:"https://kbase.us/services",kbaseRoot:"https://narrative.kbase.us",sketchURL:"https://kbase.us/dynserv/1b054633a008e078cec1a20dfd6d118d53c31ed4.sketch-service",relEngURL:"https://kbase.us/services/relation_engine_api",authToken:null},document._page=u({pendingInput:!0,loading:!1,obj:{},upaForm:c(),homologTable:f(),fetchUpa(e){this.obj.upa=e,this.loading=!0,this.pendingInput=!1,this._render();const t=s(e);this.homologTable.fetch(e),a(t,null).then(e=>{e.results&&e.results.length?(this.typeCounts=function(e,t){const n=e.concat(t).map(e=>({type:e.type,count:e.type_count,typeVersion:e.type.match(/(\d+\.\d+)$/)[0],typeName:l(e.type)})),r={};return n.forEach(e=>{const t=r[e.typeName];t?Number(t.typeVersion)===Number(e.typeVersion)?r[e.typeName].count+=e.count:Number(t.typeVersion)<Number(e.typeVersion)&&(r[e.typeName]=e):r[e.typeName]=e}),Object.values(r).sort((e,t)=>d(e.typeName,t.typeName))}(e.results[0].inb||{},e.results[0].out||{}),this.typeCounts=this.typeCounts.map(e=>(e.linkedDataTable=p(t,e.type,e.count),e))):this.typeCounts=null,this.loading=!1,this._render()}).catch(e=>{console.error(e),this.loading=!1,this._render()})},fetchTypeList(e){e.linkedDataTable.data&&e.linkedDataTable.data.length||e.linkedDataTable.fetchInitial(),this._render()},view:h}),window._messageHandlers={setConfig:function({config:e}){window._env=Object.assign(window._env,e),e.upa&&document._page.fetchUpa(e.upa.replace(/:/g,"/"))}},document.body.appendChild(document._page._render().elm)},function(e,t,n){"use strict";function r(e,t,n,r,o){return{sel:e,data:t,children:n,text:r,elm:o,key:void 0===t?void 0:t.key}}Object.defineProperty(t,"__esModule",{value:!0}),t.vnode=r,t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.array=Array.isArray,t.primitive=function(e){return"string"==typeof e||"number"==typeof e}},function(e,t){e.exports={colors:{AssemblyInput:"#F44336",Assembly:"#920D58",ChromatographyMatrix:"#E91E63",Collection:"#E91E63",Genome:"#3F51B5",ContigSet:"#3F51B5",DomainAlignment:"#000000",EstimateKResult:"#000000",ExpressionMatrix:"#2196F3",DifferentialExpressionMatrix:"#2196F3",ExpressionSample:"#2196F3",ExpressionSeries:"#2196F3",FBA:"#673AB7",FBAModel:"#673AB7",FeatureClusters:"#AEEA00",Feature:"rgb(141, 175, 42)",FeatureSet:"rgb(141, 175, 42)",FunctionalMatrix:"#000000",GenomeAnnotation:"#920D58",GenomeComparison:"#3F51B5",GenomeSet:"#3F51B5",Heatmap:"#795548",Media:"#795548",Metagenome:"#795548",Network:"#795548",Pangenome:"#795548",PhenotypeSet:"#795548",PhenotypeSimulationSet:"#795548",ProteomeComparison:"#795548",ReferenceAssembly:"#795548",SingleEndLibrary:"#795548",PairedEndLibrary:"#795548",Taxon:"#920D58",TaxonomicMatrix:"#795548",Tree:"#795548",RNASeqAlignment:"rgb(183, 58, 58)",RNASeqExpression:"rgb(183, 58, 58)",RNASeqSampleSet:"rgb(183, 58, 58)",RNASeqAlignmentSet:"rgb(183, 58, 58)"}}},function(e,t,n){"use strict";function r(e,t){var n,r,o=t.elm,i=e.data.props,a=t.data.props;if((i||a)&&i!==a){for(n in a=a||{},i=i||{})a[n]||delete o[n];for(n in a)r=a[n],i[n]===r||"value"===n&&o[n]===r||(o[n]=r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.propsModule={create:r,update:r},t.default=t.propsModule},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="undefined"!=typeof window&&window.requestAnimationFrame.bind(window)||setTimeout,o=function(e){r(function(){r(e)})},i=!1;function a(e,t,n){o(function(){e[t]=n})}function s(e,t){var n,r,o=t.elm,i=e.data.style,s=t.data.style;if((i||s)&&i!==s){s=s||{};var l="delayed"in(i=i||{});for(r in i)s[r]||("-"===r[0]&&"-"===r[1]?o.style.removeProperty(r):o.style[r]="");for(r in s)if(n=s[r],"delayed"===r&&s.delayed)for(var d in s.delayed)n=s.delayed[d],l&&n===i.delayed[d]||a(o.style,d,n);else"remove"!==r&&n!==i[r]&&("-"===r[0]&&"-"===r[1]?o.style.setProperty(r,n):o.style[r]=n)}}t.styleModule={pre:function(){i=!1},create:s,update:s,destroy:function(e){var t,n,r=e.elm,o=e.data.style;if(o&&(t=o.destroy))for(n in t)r.style[n]=t[n]},remove:function(e,t){var n=e.data.style;if(n&&n.remove){i||(getComputedStyle(document.body).transform,i=!0);var r,o=e.elm,a=0,s=n.remove,l=0,d=[];for(r in s)d.push(r),o.style[r]=s[r];for(var u=getComputedStyle(o)["transition-property"].split(", ");a<u.length;++a)-1!==d.indexOf(u[a])&&l++;o.addEventListener("transitionend",function(e){e.target===o&&--l,0===l&&t()})}else t()}},t.default=t.styleModule},function(e,t,n){"use strict";function r(e,t){var n,r,o=t.elm,i=e.data.class,a=t.data.class;if((i||a)&&i!==a){for(r in a=a||{},i=i||{})a[r]||o.classList.remove(r);for(r in a)(n=a[r])!==i[r]&&o.classList[n?"add":"remove"](r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.classModule={create:r,update:r},t.default=t.classModule},function(e,t,n){"use strict";function r(e,t){var n=e.type,r=t.data.on;r&&r[n]&&function e(t,n,r){if("function"==typeof t)t.call(n,r,n);else if("object"==typeof t)if("function"==typeof t[0])if(2===t.length)t[0].call(n,t[1],r,n);else{var o=t.slice(1);o.push(r),o.push(n),t[0].apply(n,o)}else for(var i=0;i<t.length;i++)e(t[i],n,r)}(r[n],t,e)}function o(e,t){var n,o=e.data.on,i=e.listener,a=e.elm,s=t&&t.data.on,l=t&&t.elm;if(o!==s){if(o&&i)if(s)for(n in o)s[n]||a.removeEventListener(n,i,!1);else for(n in o)a.removeEventListener(n,i,!1);if(s){var d=t.listener=e.listener||function e(t){r(t,e.vnode)};if(d.vnode=t,o)for(n in s)o[n]||l.addEventListener(n,d,!1);else for(n in s)l.addEventListener(n,d,!1)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.eventListenersModule={create:o,update:o,destroy:o},t.default=t.eventListenersModule},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/[A-Z]/g;function o(e,t){var n,o=t.elm,i=e.data.dataset,a=t.data.dataset;if((i||a)&&i!==a){i=i||{},a=a||{};var s=o.dataset;for(n in i)a[n]||(s?n in s&&delete s[n]:o.removeAttribute("data-"+n.replace(r,"-$&").toLowerCase()));for(n in a)i[n]!==a[n]&&(s?s[n]=a[n]:o.setAttribute("data-"+n.replace(r,"-$&").toLowerCase(),a[n]))}}t.datasetModule={create:o,update:o},t.default=t.datasetModule},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="http://www.w3.org/1999/xlink",o="http://www.w3.org/XML/1998/namespace",i=58,a=120;function s(e,t){var n,s=t.elm,l=e.data.attrs,d=t.data.attrs;if((l||d)&&l!==d){for(n in l=l||{},d=d||{}){var u=d[n];l[n]!==u&&(!0===u?s.setAttribute(n,""):!1===u?s.removeAttribute(n):n.charCodeAt(0)!==a?s.setAttribute(n,u):n.charCodeAt(3)===i?s.setAttributeNS(o,n,u):n.charCodeAt(5)===i?s.setAttributeNS(r,n,u):s.setAttribute(n,u))}for(n in l)n in d||s.removeAttribute(n)}}t.attributesModule={create:s,update:s},t.default=t.attributesModule},function(e,t,n){const r=n(21),o=n(0).default,i=n(1);function a(){const e=this;return"?form"!==document.location.search?o("div"):o("form.mb3",{on:{submit:t=>{t.preventDefault();const n=r(t.currentTarget,{hash:!0});window.localStorage.upaFormData=JSON.stringify(n),window._messageHandlers.setConfig({config:n}),e.data=n}}},[o("fieldset.inline-block.mr2",[o("label.block.mb2.bold","KBase endpoint"),o("input.input.p1",{props:{required:!0,type:"text",name:"kbaseEndpoint",value:e.data.kbaseEndpoint}})]),o("fieldset.inline-block.mr2",[o("label.block.mb2.bold","Auth token"),o("input.input.p1",{props:{type:"password",name:"authToken",value:e.data.authToken}})]),o("fieldset.inline-block",[o("label.block.mb2.bold","Object address"),o("input.input.p1",{props:{placeholder:"1/2/3",required:!0,type:"text",name:"upa",value:e.data.upa}})]),o("fieldset.clearfix.col-12.pt2",[o("button.btn",{props:{type:"submit"}},"Submit")])])}e.exports=function(){let e={kbaseEndpoint:window._env.kbaseEndpoint,authToken:window._env.authToken};if("?form"===document.location.search&&window.localStorage.upaFormData)try{e=JSON.parse(window.localStorage.upaFormData)}catch(e){console.error("Error loading upaFormData",e),window.localStorage.removeItem("upaFormData")}return i({data:e,view:a})}},function(e,t){var n=/^(?:submit|button|image|reset|file)$/i,r=/^(?:input|select|textarea|keygen)/i,o=/(\[[^\[\]]*\])/g;function i(e,t,n){if(t.match(o)){!function e(t,n,r){if(0===n.length)return t=r;var o=n.shift(),i=o.match(/^\[(.+?)\]$/);if("[]"===o)return t=t||[],Array.isArray(t)?t.push(e(null,n,r)):(t._values=t._values||[],t._values.push(e(null,n,r))),t;if(i){var a=i[1],s=+a;isNaN(s)?(t=t||{})[a]=e(t[a],n,r):(t=t||[])[s]=e(t[s],n,r)}else t[o]=e(t[o],n,r);return t}(e,function(e){var t=[],n=new RegExp(o),r=/^([^\[\]]*)/.exec(e);for(r[1]&&t.push(r[1]);null!==(r=n.exec(e));)t.push(r[1]);return t}(t),n)}else{var r=e[t];r?(Array.isArray(r)||(e[t]=[r]),e[t].push(n)):e[t]=n}return e}function a(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var o=t.hash?{}:"",s=t.serializer||(t.hash?i:a),l=e&&e.elements?e.elements:[],d=Object.create(null),u=0;u<l.length;++u){var c=l[u];if((t.disabled||!c.disabled)&&c.name&&r.test(c.nodeName)&&!n.test(c.type)){var f=c.name,p=c.value;if("checkbox"!==c.type&&"radio"!==c.type||c.checked||(p=void 0),t.empty){if("checkbox"!==c.type||c.checked||(p=""),"radio"===c.type&&(d[c.name]||c.checked?c.checked&&(d[c.name]=!0):d[c.name]=!1),null==p&&"radio"==c.type)continue}else if(!p)continue;if("select-multiple"!==c.type)o=s(o,f,p);else{p=[];for(var h=c.options,m=!1,v=0;v<h.length;++v){var g=h[v],y=t.empty&&!g.value,b=g.value||y;g.selected&&b&&(m=!0,o=t.hash&&"[]"!==f.slice(f.length-2)?s(o,f+"[]",g.value):s(o,f,g.value))}!m&&t.empty&&(o=s(o,f,""))}}}if(t.empty)for(var f in d)d[f]||(o=s(o,f,""));return o}},function(e,t,n){const r=n(1),o=n(0).default,{HomologDetails:i}=n(23),{fetchHomologs:a,fetchKnowledgeScores:s}=n(2),l=n(3),d=n(4),u=n(6);function c(){const e=this;if(e.loading)return o("p.muted","Loading homologs...");if(!e.data||!e.data.length)return o("div","");const t=e.currentPage*e.pageSize,n=[];for(let r=0;r<t&&r<e.data.length;++r)n.push(f(e,e.data[r])),n.push(p(e,e.data[r],5));return o("div",[o("h2.mt3","Similar Assemblies"),o("table.table-lined",[o("thead",[o("tr",[o("th.sticky",""),h(e,"Distance"),h(e,"Name"),h(e,"Knowledge Score"),h(e,"Source")])]),o("tbody",n)]),l(!e.hasMore,()=>o("p.muted","No more results.")),l(e.hasMore,()=>{const t=e.data.length-this.currentPage*this.pageSize;return o("div",[o("button.btn.mt2",{on:{click:()=>e.nextPage()}},["Load more "]),o("span.muted.inline-block.ml1",[t," left"])])})])}function f(e,t){const{dist:n,namespaceid:r,sciname:i,sourceid:a}=t;return o("tr",{key:a,class:{expanded:t.expanded,expandable:t.details.data.kbase_id},on:{click:()=>{console.log("result.details",t.details),t.details.data.kbase_id&&(t.expanded=!t.expanded,t.details.fetchReferences(),e._render())}}},[o("td",[l(t.details.data.kbase_id,()=>o("span.expand-icon",t.expanded?"−":"+"))]),o("td.bold",[n]),o("td",[i||a]),o("td",[isNaN(t.knowledge_score)?"":t.knowledge_score]),o("td",[r.replace(/_/g," ")])])}function p(e,t,n){return o("tr.expandable-sibling",{key:t.sourceid+"-details",class:{"expanded-sibling":t.expanded}},[o("td",{props:{colSpan:n}},[t.details.view()])])}function h(e,t){const n=e.sortCol===t;return o("th.sortable.sticky",{class:{sorting:n},on:{click:()=>{e.sortByColumn(t)}}},[o("span",[t]),l(n,()=>o("span.arrow.inline-block.ml1",{class:{"arrow-down":"asc"===e.sortDir,"arrow-up":"desc"===e.sortDir}}))])}e.exports={HomologTable:function(){return r({upa:null,data:[],currentPage:1,pageSize:30,sortable:{"Knowledge Score":!0},sortCol:"Distance",sortDir:"asc",loading:!1,hasMore:!1,sorters:{Distance:(e,t)=>u(Number(e.dist),Number(t.dist)),Name:(e,t)=>u(e.sciname||e.sourceid,t.sciname||t.sourceid),"Knowledge Score":(e,t)=>{const n=isNaN(e.knowledge_score)?0:Number(e.knowledge_score),r=isNaN(t.knowledge_score)?0:Number(t.knowledge_score);return u(n,r)},Source:(e,t)=>u(e.source,t.source)},sortByColumn(e){const t=this.sortCol===e;if(t&&"asc"===this.sortDir?this.sortDir="desc":(this.sortDir="asc",this.sortCol=e),this.sortCol){let t=this.sorters[e];"desc"===this.sortDir&&(n=t,t=function(e,t){const r=n(e,t);return-r}),this.data.sort(t)}var n;this._render()},nextPage(){this.hasMore&&(this.currentPage+=1,this.hasMore=this.currentPage*this.pageSize<this.data.length,this._render())},fetch(e){this.upa=e.replace(/:/g,"/"),this.loading=!0,a(this.upa).then(e=>(this.loading=!1,this.currentPage=1,e&&e.length?(this.data=e,this.hasMore=this.data.length>this.pageSize):(this.data=[],this.hasMore=!1),this.data)).then(e=>{if(e&&e.length){const t=(e=e.map(e=>(e.details=i(e),e))).map(e=>e.kbase_id).filter(Boolean).map(d).map(e=>"wsprov_object/"+e);return s(t)}return[]}).then(e=>{e&&e.results&&e.results.length&&e.results.forEach((e,t)=>{const n=Number(e.knowledge_score),r=e.key;this.data.filter(e=>d(e.kbase_id)===r).forEach(e=>{e.knowledge_score=n})})}).catch(e=>{console.error(e)}).finally(()=>{this.loading=!1,this._render()})},view:c})}}},function(e,t,n){const r=n(1),o=n(0).default,{fetchReferences:i}=n(2),a=n(4),s=n(5),l=n(7),d=n(8),u=n(9);function c(){const e=window._env.kbaseRoot+"/#dataview/"+this.data.kbase_id;return o("div.p1",[u("Assembly page",this.data.sciname||this.data.sourceid,e),f(this)])}function f(e){return e.references.loading?o("p.p1.muted","Loading references..."):e.references.data&&e.references.data.length?o("div.p1",[o("h3.h3-5.my1","Referencing Objects"),o("table.table-lined.table-lined-gray",[o("thead",[o("tr",[o("th","Type"),o("th","Name"),o("th","Creator"),o("th","Date")])]),o("tbody",e.references.data.map(e=>(function(e,t){const n=d(t);return o("tr",{key:t._key},[o("td",o("span.bold",s(t.ws_type))),o("td",[o("a",{props:{href:n.obj,target:"_blank"}},[t.obj_name])]),o("td",t.owner),o("td",l(t.save_date))])})(0,e)))])]):o("p.p1.muted","No further references found for this result.")}e.exports={HomologDetails:function(e){return r({references:{fetched:!1,data:[],currentPage:0,pageSize:10,loading:!1},fetchReferences(e){if(this.references.fetched)return;this.references.loading=!0;const t=a(this.data.kbase_id);i(t).then(e=>{if(!(e&&e.results&&e.results.length))throw new Error(e);this.references.data=e.results}).catch(e=>{console.error(e)}).finally(()=>{this.references.loading=!1,this.references.fetched=!0,this._render()})},data:e,view:c})}}},function(e,t){e.exports=(e=>e.replace(/:/g,"/"))},function(e,t,n){const r=n(1),o=n(0).default,i=n(9),{fetchLinkedObjs:a}=n(2),s=n(8),l=n(7),d=n(3),u=n(5);function c(){if(this.loading)return o("p.muted","Loading...");if(!this.data||!this.data.length)return o("p.muted","No linked data");let e=[];for(let t=0;t<this.data.length;++t){const{path:n,vertex:r,expanded:a}=this.data[t];let d=n.vertices.map(e=>u(e.ws_type));d[0]+=" (this)",d=d.join(" ⇾ ");const c=o("tr.expandable",{class:{expanded:a},key:r._key,on:{click:()=>{this.data[t].expanded=!this.data[t].expanded,this._render()}}},[o("td",[o("span.expand-icon",a?"−":"+")]),o("td",[r.obj_name]),o("td",l(r.save_date)),o("td",[r.owner]),o("td",[r.narr_name])]),f=s(r),p=o("tr.expandable-sibling",{key:r._key+"-details",class:{"expanded-sibling":a}},[o("td",{props:{colSpan:5}},[o("div.p1",{style:{overflow:"auto",whiteSpace:"normal"}},[i("Object",r.obj_name,f.obj),i("Save date",l(r.save_date)),i("Data type",r.ws_type,f.type),i("Narrative",r.narr_name,f.narrative),i("Path to object",d)])])]);e.push(c),e.push(p)}return o("div",[o("table.table-lined",[o("thead",[o("tr",[o("th.sticky",""),o("th.sticky","Name"),o("th.sticky","Date"),o("th.sticky","Creator"),o("th.sticky","Narrative")])]),o("tbody",e)]),d(this.hasMore,()=>o("div",[o("button.btn.mt2",{on:{click:()=>this.fetchNext()},props:{disabled:this.loadingMore}},[d(this.loadingMore,"Loading..."),d(!this.loadingMore,"Load more")]),o("span.muted.inline-block.ml1",[this.totalCount-this.data.length," left"])])),d(!this.hasMore,()=>o("p.muted","No more results"))])}e.exports={LinkedDataTable:function(e,t,n){return r({type:t,totalCount:n,obj_key:e,data:[],page:0,limit:20,loading:!1,loadingMore:!1,fetchInitial(){this.loading=!0,this.page=0,this._render(),a(e,{type:t,offset:0,limit:this.limit}).then(e=>{this.loading=!1,this.data=null,this.hasMore=!1,e.results&&e.results.length?(this.data=e.results[0],this.data.length<this.totalCount&&(this.hasMore=!0)):e.error&&console.error(e.error),this._render()}).catch(e=>{console.error(e),this.loading=!1,this._render()})},fetchNext(){this.page+=1,this.loadingMore=!0,this._render();const e=this.page*this.limit;a(this.obj_key,{type:this.type,offset:e,limit:this.limit}).then(e=>{e.results&&(e.results.length&&e.results[0].length?this.data=this.data.concat(e.results[0]):this.hasMore=!1,this.data.length>=this.totalCount&&(this.hasMore=!1)),e.error&&console.error(e.error),this.loadingMore=!1,this._render()}).catch(e=>{console.error(e),this.loadingMore=!1,this._render()})},view:c})}}},function(e,t,n){"use strict";function r(e,t,n,r,o){return{sel:e,data:t,children:n,text:r,elm:o,key:void 0===t?void 0:t.key}}n.r(t);var o=r,i=Array.isArray;function a(e){return"string"==typeof e||"number"==typeof e}var s={createElement:function(e){return document.createElement(e)},createElementNS:function(e,t){return document.createElementNS(e,t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType}};function l(e,t,n){var o,s,l,d={};if(void 0!==n?(d=t,i(n)?o=n:a(n)?s=n:n&&n.sel&&(o=[n])):void 0!==t&&(i(t)?o=t:a(t)?s=t:t&&t.sel?o=[t]:d=t),void 0!==o)for(l=0;l<o.length;++l)a(o[l])&&(o[l]=r(void 0,void 0,void 0,o[l],void 0));return"s"!==e[0]||"v"!==e[1]||"g"!==e[2]||3!==e.length&&"."!==e[3]&&"#"!==e[3]||function e(t,n,r){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==r&&void 0!==n)for(var o=0;o<n.length;++o){var i=n[o].data;void 0!==i&&e(i,n[o].children,n[o].sel)}}(d,o,e),r(e,d,o,s,void 0)}function d(e,t){t.elm=e.elm,e.data.fn=t.data.fn,e.data.args=t.data.args,t.data=e.data,t.children=e.children,t.text=e.text,t.elm=e.elm}function u(e){var t=e.data;d(t.fn.apply(void 0,t.args),e)}function c(e,t){var n,r=e.data,o=t.data,i=r.args,a=o.args;if(r.fn===o.fn&&i.length===a.length){for(n=0;n<a.length;++n)if(i[n]!==a[n])return void d(o.fn.apply(void 0,a),t);d(e,t)}else d(o.fn.apply(void 0,a),t)}var f=function(e,t,n,r){return void 0===r&&(r=n,n=t,t=void 0),l(e,{key:t,hook:{init:u,prepatch:c},fn:n,args:r})};function p(e){return void 0===e}function h(e){return void 0!==e}n.d(t,"init",function(){return b}),n.d(t,"h",function(){return l}),n.d(t,"thunk",function(){return f});var m=o("",{},[],void 0,void 0);function v(e,t){return e.key===t.key&&e.sel===t.sel}function g(e,t,n){var r,o,i,a={};for(r=t;r<=n;++r)null!=(i=e[r])&&void 0!==(o=i.key)&&(a[o]=r);return a}var y=["create","update","remove","destroy","pre","post"];function b(e,t){var n,r,l={},d=void 0!==t?t:s;for(n=0;n<y.length;++n)for(l[y[n]]=[],r=0;r<e.length;++r){var u=e[r][y[n]];void 0!==u&&l[y[n]].push(u)}function c(e,t){return function(){if(0==--t){var n=d.parentNode(e);d.removeChild(n,e)}}}function f(e,t){var n,r=e.data;void 0!==r&&h(n=r.hook)&&h(n=n.init)&&(n(e),r=e.data);var o=e.children,s=e.sel;if("!"===s)p(e.text)&&(e.text=""),e.elm=d.createComment(e.text);else if(void 0!==s){var u=s.indexOf("#"),c=s.indexOf(".",u),v=u>0?u:s.length,g=c>0?c:s.length,y=-1!==u||-1!==c?s.slice(0,Math.min(v,g)):s,b=e.elm=h(r)&&h(n=r.ns)?d.createElementNS(n,y):d.createElement(y);for(v<g&&b.setAttribute("id",s.slice(v+1,g)),c>0&&b.setAttribute("class",s.slice(g+1).replace(/\./g," ")),n=0;n<l.create.length;++n)l.create[n](m,e);if(i(o))for(n=0;n<o.length;++n){var w=o[n];null!=w&&d.appendChild(b,f(w,t))}else a(e.text)&&d.appendChild(b,d.createTextNode(e.text));h(n=e.data.hook)&&(n.create&&n.create(m,e),n.insert&&t.push(e))}else e.elm=d.createTextNode(e.text);return e.elm}function b(e,t,n,r,o,i){for(;r<=o;++r){var a=n[r];null!=a&&d.insertBefore(e,f(a,i),t)}}function w(e){var t,n,r=e.data;if(void 0!==r){for(h(t=r.hook)&&h(t=t.destroy)&&t(e),t=0;t<l.destroy.length;++t)l.destroy[t](e);if(void 0!==e.children)for(n=0;n<e.children.length;++n)null!=(t=e.children[n])&&"string"!=typeof t&&w(t)}}function _(e,t,n,r){for(;n<=r;++n){var o=void 0,i=void 0,a=void 0,s=t[n];if(null!=s)if(h(s.sel)){for(w(s),i=l.remove.length+1,a=c(s.elm,i),o=0;o<l.remove.length;++o)l.remove[o](s,a);h(o=s.data)&&h(o=o.hook)&&h(o=o.remove)?o(s,a):a()}else d.removeChild(e,s.elm)}}function k(e,t,n){var r,o;h(r=t.data)&&h(o=r.hook)&&h(r=o.prepatch)&&r(e,t);var i=t.elm=e.elm,a=e.children,s=t.children;if(e!==t){if(void 0!==t.data){for(r=0;r<l.update.length;++r)l.update[r](e,t);h(r=t.data.hook)&&h(r=r.update)&&r(e,t)}p(t.text)?h(a)&&h(s)?a!==s&&function(e,t,n,r){for(var o,i,a,s=0,l=0,u=t.length-1,c=t[0],h=t[u],m=n.length-1,y=n[0],w=n[m];s<=u&&l<=m;)null==c?c=t[++s]:null==h?h=t[--u]:null==y?y=n[++l]:null==w?w=n[--m]:v(c,y)?(k(c,y,r),c=t[++s],y=n[++l]):v(h,w)?(k(h,w,r),h=t[--u],w=n[--m]):v(c,w)?(k(c,w,r),d.insertBefore(e,c.elm,d.nextSibling(h.elm)),c=t[++s],w=n[--m]):v(h,y)?(k(h,y,r),d.insertBefore(e,h.elm,c.elm),h=t[--u],y=n[++l]):(void 0===o&&(o=g(t,s,u)),p(i=o[y.key])?(d.insertBefore(e,f(y,r),c.elm),y=n[++l]):((a=t[i]).sel!==y.sel?d.insertBefore(e,f(y,r),c.elm):(k(a,y,r),t[i]=void 0,d.insertBefore(e,a.elm,c.elm)),y=n[++l]));(s<=u||l<=m)&&(s>u?b(e,null==n[m+1]?null:n[m+1].elm,n,l,m,r):_(e,t,s,u))}(i,a,s,n):h(s)?(h(e.text)&&d.setTextContent(i,""),b(i,null,s,0,s.length-1,n)):h(a)?_(i,a,0,a.length-1):h(e.text)&&d.setTextContent(i,""):e.text!==t.text&&(h(a)&&_(i,a,0,a.length-1),d.setTextContent(i,t.text)),h(o)&&h(r=o.postpatch)&&r(e,t)}}return function(e,t){var n,r,i,a=[];for(n=0;n<l.pre.length;++n)l.pre[n]();for(function(e){return void 0!==e.sel}(e)||(e=function(e){var t=e.id?"#"+e.id:"",n=e.className?"."+e.className.split(" ").join("."):"";return o(d.tagName(e).toLowerCase()+t+n,{},[],void 0,e)}(e)),v(e,t)?k(e,t,a):(r=e.elm,i=d.parentNode(r),f(t,a),null!==i&&(d.insertBefore(i,t.elm,d.nextSibling(r)),_(i,[e],0,0))),n=0;n<a.length;++n)a[n].data.hook.insert(a[n]);for(n=0;n<l.post.length;++n)l.post[n]();return t}}}]);